<div class="app-container">
  <nav ngbNav #nav="ngbNav" class="app-navbar navbar navbar-expand-lg position-fixed shadow w-100">
    <div class="container-xxl">
      <button [class.v-hidden]="router.isActive('/', true)" (click)="showSidebar()" class="navbar-toggler"
              style="--bs-navbar-toggler-focus-width: 0; --bs-navbar-toggler-border-color: transparent;font-size: 1.2rem;"
              type="button">

        <ng-icon name="bootstrap-list"></ng-icon>
      </button>
      <a class="navbar-brand sm-center" routerLink="">
        <img src="{{host}}assets/turtle.svg" alt="turtle" width="30" height="24"
             class="d-inline-block align-text-top"/>
        RinNET
      </a>
      <ng-template #userPopContent>
        <div class="user-popover vstack">
          <label class="text-start mx-2 h5">{{authenticationService.currentAccountValue.name}}</label>
          <hr class="my-2 border">
          <a class="link-btn rounded mb-2" [class.active]="isActive('/cards')" routerLink="/cards">{{'App.UserPopup.MyCards' | translate}}</a>
          <a class="link-btn link-btn-danger rounded" (click)="logout()">{{'App.UserPopup.SignOut' | translate}}</a>
        </div>
      </ng-template>

      <div class="hstack gap-1">
        <button class="btn btn-icon py-0"
                style="font-size: 1.2rem;"
                type="button"
                (click)="toggleColorMode()">
                <ng-container [ngSwitch]="colorMode">
                  <ng-icon *ngSwitchCase="'light'" name="bootstrap-sun"></ng-icon>
                  <ng-icon *ngSwitchCase="'dark'" name="bootstrap-stars"></ng-icon>
                </ng-container>
        </button>
        <div *ngIf="account" class="vr my-2"></div>
        <button *ngIf="account"
                class="btn btn-icon py-0"
                style="font-size: 1.2rem;"
                container="body"
                placement="bottom-right"
                [ngbPopover]="userPopContent"
                type="button">
          <ng-icon name="bootstrap-person"></ng-icon>
        </button>
      </div>
    </div>
  </nav>
  <div class="position-relative">
    <div *ngIf="loading">
      <div class="progress position-fixed fixed-top" style="margin-top: 3.6rem">
        <div class="progress-bar indeterminate-front" role="progressbar"></div>
      </div>
      <div class="progress position-fixed fixed-top bg-transparent" style="margin-top: 3.6rem">
        <div class="progress-bar indeterminate-back" role="progressbar"></div>
      </div>
    </div>
    <div class="d-lg-grid container-xxl" style="grid-template-areas: 'sidebar main'; grid-template-columns: auto 1fr">
      <aside #sidebar class="sidebar d-block overflow-y-auto position-sticky"
             [class.d-none]="router.isActive('/', true)">
        <div id="sidebar" class="offcanvas-lg offcanvas-start" tabindex="-1">
          <div class="offcanvas-header" style="height: 3.6rem">
            <h5 class="offcanvas-title" id="offcanvasExampleLabel">Navigation</h5>
            <button type="button" class="btn-close" aria-label="Close"
                    (click)="hideSidebar()"></button>
          </div>
          <div class="offcanvas-body user-select-none">
            <nav>
              <ul class="list-unstyled mt-2">
                <li>
                  <ul class="list-unstyled pb-2 ps-3 small">
                    <li class="pb-2">
                      <a class="link-btn rounded" [class.active]="isActive('/dashboard')" (click)="navigateTo('/dashboard')">{{'App.Sidebar.Dashboard' | translate}}</a>
                    </li>
                    <li class="pb-2">
                      <a class="link-btn rounded" [class.active]="isActive('/import')" (click)="navigateTo('/import')">{{'App.Sidebar.Import' | translate}}</a>
                    </li>
<!--                    <li class="pb-2">-->
<!--                      <a class="link-btn rounded" target="_blank"-->
<!--                         href="https://status.naominet.live/status/aquaserver">{{'App.Sidebar.Status' | translate}}</a>-->
<!--                    </li>-->
                  </ul>
                </li>
                <li *ngIf="filterItems(ongekiMenu).length != 0">
                  <strong class="d-flex w-100 fw-semibold mb-2 ps-3">{{'Common.Ongeki' | translate}}</strong>
                  <ul class="list-unstyled pb-2 ps-3 small">
                    <li *ngFor="let item of filterItems(ongekiMenu)" class="pb-2">
                      <a class="link-btn rounded" [class.active]="isActive(item.url)" (click)="navigateTo(item.url)">{{('App.Sidebar.' + item.name) | translate}}</a>
                    </li>
                  </ul>
                </li>
                <li *ngIf="filterItems(v2Menus).length != 0">
                  <strong class="d-flex w-100 fw-semibold mb-2 ps-3">{{'Common.ChuniV2' | translate}}</strong>
                  <ul class="list-unstyled pb-2 ps-3 small">
                    <li *ngFor="let item of filterItems(v2Menus)" class="pb-2">
                      <a class="link-btn rounded" [class.active]="isActive(item.url)" (click)="navigateTo(item.url)">{{('App.Sidebar.' + item.name) | translate}}</a>
                    </li>
                  </ul>
                </li>
                <li *ngIf="filterItems(mai2Menus).length != 0">
                  <strong class="d-flex w-100 fw-semibold mb-2 ps-3" >{{'Common.Mai2' | translate}}</strong>
                  <ul class="list-unstyled pb-2 ps-3 small">
                    <li *ngFor="let item of filterItems(mai2Menus)" class="pb-2">
                      <a class="link-btn rounded " [class.active]="isActive(item.url)" (click)="navigateTo(item.url)">{{('App.Sidebar.' + item.name) | translate}}</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </aside>
      <main class="order-1 ms-0 ms-lg-3 me-lg-2" style="grid-area: main;min-height: 100vh;margin-top: 4.6rem">
        <div>
          <router-outlet></router-outlet>
        </div>
      </main>
    </div>
    <app-toasts aria-live="polite" aria-atomic="true" style="margin-top: 3.6rem"></app-toasts>
  </div>
</div>
<footer class="footer mt-3">
  <div class="row justify-content-center small fw-bold p-4 mx-0 gy-2 gx-4 text-center">
    <div class="col-auto">Â©2024 RinNET Team</div>
    <div class="col-auto">
      <a target="_blank" href="https://status.naominet.live/status/aquaserver">Status</a>
      <a class="ms-4" target="_blank" href="https://github.com/mxihan/aqua_viewer">Github</a>
    </div>
    <div class="col-auto">
      Code Licenced
      <a href="https://github.com/mxihan/aqua_viewer/blob/master/LICENSE" target="_blank">AGPL 3.0</a>
    </div>
  </div>
</footer>
